<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Ember Starter Kit</title>
	<link rel="stylesheet" href="css/normalize.css">
	<link rel="stylesheet" href="css/style.css">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/bootstrap-theme.min.css">
</head>
<body>
	<script type="text/x-handlebars">
		<nav class="navbar navbar-default" role="navigation">
			<div class="container-fluid">
				<div class="navbar-header">
					<a class="navbar-brand" href="#">BeloteBuddy</a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">Partie <span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
								{{#each partie in model}}
								<li>{{#link-to 'partie' partie}}Partie en cours{{/link-to}}</li>
								{{/each}}
								<li><a href="#" {{action 'newPartie'}}>Nouvelle partie</a></li>
								<li>{{#link-to 'parties'}}Toutes les parties{{/link-to}}</li>
							</ul>
						</li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">Memo <span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
								<li><a href="#">Règles</a></li>
								<li><a href="#">Valeurs et ordre des cartes</a></li>
								<li><a href="#">Annonces</a></li>
								<li><a href="#">Variantes</a></li>
							</ul>
						</li>
						<li><a href="#">A propos</a></li>
					</ul>
				</div><!-- /.navbar-collapse -->
			</div><!-- /.container-fluid -->
		</nav>

		{{outlet}}
		{{outlet modal}}
	</script>

	<script type="text/x-handlebars" data-template-name="index">
		<h3>Bienvenue s</h3>
	</script>

	<script type="text/x-handlebars" data-template-name="donnes">
		<h3>Donnes de la partie {{model.id}}</h3>
		<table class="table">
			<thead>
				<tr>
					<td>Attaquant</td>
					<td>Contrat</td>
					<!--td>Points faits NS</td-->
					<!--td>Points faits EO</td-->
					<!--td>Points réel NS</td-->
					<!--td>Points réel EO</td-->
					<td>Points marqués NS</td>
					<td>Points marqués EO</td>
					<td>Actions</td>
				</tr>
			</thead>
			<tbody>
				{{#each model.donnes}}
				<tr>
					<td>{{attaquant}}</td>
					<td>{{contrat}} {{couleur}}</td>
					<!--td>{{ptsFaitsNS}}</td-->
					<!--td>{{ptsFaitsEO}}</td-->
					<!--td>{{ptsReelsNS}}</td-->
					<!--td>{{ptsReelsEO}}</td-->
					<td>{{ptsMarquesNS}}</td>
					<td>{{ptsMarquesEO}}</td>
					<td>Supprimer</td>
				</tr>
				{{/each}}
			</tbody>
		</table>

		{{#link-to 'partie'}}Retour à la partie{{/link-to}}
	</script>

	<script type="text/x-handlebars" data-template-name="parties">
		<h3>Liste des parties</h3>
		<table class="table">
			<thead>
				<tr>
					<td>Id</td>
					<td>Date</td>
					<td>En cours</td>
					<td>Actions</td>
				</tr>
			</thead>
			<tbody>
				{{#each}}
				<tr>
					<td>{{id}}</td>
					<td>{{date}}</td>
					<td>{{enCours}}</td>
					<td>
						<button {{action 'deletePartie' id}} type="button" class="btn btn-default btn-sm" data-toggle="modal">
							<span class="glyphicon glyphicon-delete"></span> Supprimer
						</button>
					 Voir les donnes</td>
				</tr>
				{{/each}}
			</tbody>
		</table>

		{{#link-to 'partie'}}Retour à la partie{{/link-to}}
	</script>

	<script type="text/x-handlebars" data-template-name="partie">
		<h3>Partie {{model.id}}</h3>
		<table class="table">
			<thead>
				<tr>
					<td>Nord-Sud</td>
					<td>Est-Ouest</td>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>{{model.scoreNS}}</td>
					<td>{{model.scoreEO}}</td>
				</tr>
			</tbody>
		</table>
		<button {{action 'showModal' 'ajouterDonneModal' model}} type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#ajouterDonne">
			<span class="glyphicon glyphicon-plus"></span> Ajouter une donne
		</button>
		{{#link-to 'donnes' model}}Voir toutes les donnes{{/link-to}}
	</script>

	<script type="text/x-handlebars" data-template-name="ajouterDonneModal">
		{{#my-modal title="Ajouter une donne" ok="save" close="removeModal"}}
		<form class="form-horizontal" role="form" {{action 'ok' on='submit' target=view}}>
			<div class="form-group">
				<label class="col-sm-2 control-label">Attaquant</label>
				<label class="radio-inline">
					{{view Ember.RadioButton name="newAttaquant" selectionBinding="model.attaquant" value="NS"}} Nord-Sud
				</label>
				<label class="radio-inline">
					{{view Ember.RadioButton name="newAttaquant" selectionBinding="model.attaquant" value="EO"}} Est-Ouest
				</label>
			</div>
			<div class="form-group">
				<label for="inputContrat" class="col-sm-2 control-label">Contrat</label>
				<div class="col-sm-6">
					{{view Ember.Select content=contrats value=model.contrat classNames="form-control"}}
				</div>
			</div>
			<div class="form-group">
				<label for="inputCouleur" class="col-sm-2 control-label">Couleur</label>
				<div class="col-sm-6">
					{{view Ember.Select content=couleurs value=model.couleur classNames="form-control"}}
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-10">
					<label for="inputPtsFaitsNS" class="col-sm-6 control-label">Points faits Nord-Sud</label>
					{{input type="number" id="ptsFaitsNS" value=model.ptsFaitsNS action="updatedPtsFaitsNS" on="enter"}}
					{{input type="checkbox" name="beloteNS" checked=model.beloteNS}} Belote
				</div>
				<div class="col-sm-10">
					<label for="inputPtsReelsNS" class="col-sm-6 control-label">Points réels Nord-Sud</label>
					{{input type="number" id="ptsReelsNS" value=model.ptsReelsNS}}
				</div>
				<div class="col-sm-10">
					<label for="inputPtsMarquesNS" class="col-sm-6 control-label">Points marqués Nord-Sud</label>
					{{input type="number" id="ptsMarquesNS" value=model.ptsMarquesNS}}
				</div>
			</div>
			<div class="form-group">
				<div class="col-sm-10">
					<label for="inputPtsFaitsEO" class="col-sm-6 control-label">Points faits Est-Ouest</label>
					{{input type="number" id="ptsFaitsEO" value=model.ptsFaitsEO action="updatedPtsFaitsEO" on="enter"}}
					{{input type="checkbox" name="beloteEO" checked=model.beloteEO}} Belote
				</div>
				<div class="col-sm-10">
					<label for="inputPtsReelsEO" class="col-sm-6 control-label">Points réels Est-Ouest</label>
					{{input type="number" id="ptsReelsEO" value=model.ptsReelsEO}}
				</div>
				<div class="col-sm-10">
					<label for="inputPtsMarquesEO" class="col-sm-6 control-label">Points marqués Est-Ouest</label>
					{{input type="number" id="ptsMarquesEO" value=model.ptsMarquesEO}}
				</div>
			</div>
		</form>
	</form>
	{{/my-modal}}
</script>


<!--Components-->
<script type="text/x-handlebars" id="components/my-modal">
	<div class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
					<h4 class="modal-title">{{title}}</h4>
				</div>
				<div class="modal-body">
					{{yield}}
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Annuler</button>
					<button type="button" class="btn btn-primary" {{action 'ok'}}>OK</button>
				</div>
			</div>
		</div>
	</div>
</script>

<script src="js/libs/jquery-1.10.2.js"></script>
<script src="js/libs/bootstrap.min.js"></script>
<script src="js/libs/handlebars-1.1.2.js"></script>
<script src="js/libs/ember-1.7.0.js"></script>
<script src="js/libs/ember-data.js"></script>
<script src="js/libs/localstorage_adapter.js"></script>
<script src="js/app.js"></script>
<!-- to activate the test runner, add the "?test" query string parameter -->
<script src="tests/runner.js"></script>
</body>
</html>
